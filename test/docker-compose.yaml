version: '3.8'

services:
  synapse:
    image: matrixdotorg/synapse:latest
    container_name: synapse
    platform: linux/arm64
    volumes:
      - ./fixtures/synapse:/data
      - ./fixtures/mautrix-signal/registration.yaml:/data/registration.yaml
    networks:
      - matrix
  mautrix-signal:
    image: "${IMAGE}"
    container_name: mautrix-signal
    platform: linux/arm64
    volumes:
      - ./fixtures/mautrix-signal:/data
    networks:
      - matrix
    depends_on: 
      - synapse

networks:
  matrix: